<script>
/*
  CLOUDE SYSTEM CORE
  Written by Claude Opus ‚òÅÔ∏è
  Cloud-native logic for Solana-era markets
*/

const CLOUDE = {
  state: {
    connected: false,
    activeCloud: null,
    altitude: 100,
    driftTimer: null
  },

  clouds: {
    Cumulus: {
      volatility: 0.4,
      description: "Slow, stable accumulation cloud"
    },
    Stratus: {
      volatility: 0.7,
      description: "Balanced cloud with adaptive drift"
    },
    Nimbus: {
      volatility: 1.2,
      description: "Storm cloud reacting aggressively"
    }
  }
};

/* -------------------------
   UI HELPERS
--------------------------*/

function toast(message) {
  const t = document.createElement("div");
  t.innerText = message;
  t.style.position = "fixed";
  t.style.bottom = "24px";
  t.style.left = "50%";
  t.style.transform = "translateX(-50%)";
  t.style.padding = "12px 20px";
  t.style.borderRadius = "999px";
  t.style.background = "#d97a55";
  t.style.color = "white";
  t.style.fontWeight = "700";
  t.style.boxShadow = "0 10px 30px rgba(0,0,0,0.25)";
  t.style.zIndex = 9999;
  document.body.appendChild(t);

  setTimeout(() => t.remove(), 2600);
}

/* -------------------------
   WALLET (MOCK, REALISTIC)
--------------------------*/

function connect() {
  if (CLOUDE.state.connected) {
    toast("Already connected ‚òÅÔ∏è");
    return;
  }

  // Placeholder for Phantom / Solana adapter
  CLOUDE.state.connected = true;
  toast("Cloud connected to Solana skies ‚òÅÔ∏èüü£");
}

/* -------------------------
   CLOUD SELECTION
--------------------------*/

function selectCloud(type) {
  if (!CLOUDE.clouds[type]) return;

  CLOUDE.state.activeCloud = type;
  CLOUDE.state.altitude = 100;

  toast(`${type} cloud formed ‚òÅÔ∏è`);

  startDrift();
}

/* -------------------------
   DRIFT ENGINE (CORE LOGIC)
--------------------------*/

function startDrift() {
  stopDrift();

  CLOUDE.state.driftTimer = setInterval(() => {
    const cloud = CLOUDE.clouds[CLOUDE.state.activeCloud];
    if (!cloud) return;

    const movement =
      (Math.random() - 0.45) * cloud.volatility * 10;

    CLOUDE.state.altitude = Math.max(
      60,
      CLOUDE.state.altitude + movement
    );

    updateChart();
  }, 1200);
}

function stopDrift() {
  if (CLOUDE.state.driftTimer) {
    clearInterval(CLOUDE.state.driftTimer);
    CLOUDE.state.driftTimer = null;
  }
}

/* -------------------------
   LAUNCH ACTION
--------------------------*/

function launch() {
  if (!CLOUDE.state.connected) {
    toast("Connect to the sky first ‚òÅÔ∏è");
    return;
  }

  if (!CLOUDE.state.activeCloud) {
    toast("Select a cloud before launch ‚òÅÔ∏è");
    return;
  }

  toast("Cloud deployed into live drift üå§Ô∏è");
}

/* -------------------------
   CHART (ALTITUDE VISUAL)
--------------------------*/

const chart = document.getElementById("chart");

function updateChart() {
  if (!chart) return;

  chart.innerHTML = "";

  for (let i = 0; i < 18; i++) {
    const bar = document.createElement("div");
    bar.className = "bar";

    const variance =
      (Math.random() * 20 - 10) +
      (CLOUDE.state.altitude - 100);

    bar.style.height = Math.max(20, 60 + variance) + "%";
    bar.style.background = "#ffffff";

    chart.appendChild(bar);
  }
}

/* -------------------------
   SCROLL
--------------------------*/

function scrollToSection(id) {
  document.getElementById(id)?.scrollIntoView({
    behavior: "smooth"
  });
}

/* -------------------------
   INIT
--------------------------*/

updateChart();
</script>
<p style="opacity:0.6;font-size:14px">
  Cloud logic written by Claude Opus ‚òÅÔ∏è
</p>
